<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <link rel="stylesheet" href="../../PRODUCT_PLUGIN/book.css" type="text/css"></link>
  <link rel="stylesheet" href="section_numbers.css" type="text/css"></link>
<title>Data Browser</title>
</head>
<body>

<a name=top><h1>Data Browser</h1></a>

<span class="index">
- <a href="#overview">Overview</a>
- <a href="#101">Getting Started</a>
- <a href="#common">Common Tasks</a>
- <a href="#perspective">Perspective</a>
- <a href="#toolbar">Toolbar</a>
- <a href="#config">Properties Panel</a>
- <a href="#annotate">Annotations</a>
- <a href="#search">Search</a>
- <a href="#export">Export</a>
- <a href="#import">Import</a>
- <a href="#inspect">Inspect Samples</a>
- <a href="#waveforms">Waveforms</a>
- <a href="#preferences">Preferences</a>
- <a href="#transition">Older Data Browser</a>
- <a href="#history">History</a>
-
</span>


<h2><a name=overview>Overview</a></h2> 
<p>
The Data Browser is a trending tool. It can display the values of 'live'
Process Variables (PVs) as well as historic data in a Stripchart-type plot.

</p>
<div class='figure'>
   <img src="DataBrowserSnapshot.png" width="90%"/>
   <p>
   Fig. 1: Data Browser Screenshot
   </p>
</div>

<h3>Live Data</h3>
<p>
For each PV, the Data Browser collects 'live' samples from the control system
and plots them over time. The size of the live sample buffer is configurable,
as is the sample period.
</p>
<h3>Historic Data</h3>
<p>
The Data Browser queries archive data sources for historic samples to obtain
data for time ranges 'before' the live sample buffer.
You can configure one or more archive data source for each PV.
</p>


<h2><a name=101>Getting Started</a></h2>
<p>
To create a new plot:
<ol>
<li>Click on the <img src="../icons/new_databrowser.png" width=16 height=16/>
    "Open new Data Browser plot" icon in the CSS tool bar (top row of the CSS window).
<li>Open the plot's context menu by right-clicking into the plot.
    Select <img src="../icons/add.gif" width=16 height=16/> "Add PV".
<li>Enter the desired PV name, press "OK"
<li>Use the <a href="#toolbar">Toolbar</a> or <a href="#config">Properties Panel</a>
    to change the displayed time range, zoom in/out etc. 
</ol>
</p>


<h2><a name=common>Common Tasks</a></h2>
<ul>
<li>Add PV or Formula: Right-click on plot or trace table in 
    <a href="#config">Properties Panel</a>,
    select "Add PV" or "Add Formula".
<li>Delete PVs or Formulas:
    In <a href="#config">Properties Panel</a>,
    right-click on selected item in trace table and select "Delete Item".
<li>Find PV Name: Use the <a href="#search">Search Panel</a>
<li>Add archive data source:
    Select PV in <a href="#config">Properties Panel</a>.
    Right-click to "Add Archive".
    Or drag archive from <a href="#search">Search Panel</a>
    onto PV to cause that PV to be read from archive,
    or drag archive from <a href="#search">Search Panel</a>
    onto plot to cause all PVs in plot to be read from that archive.
<li>Remove archive data source:
    Select PV in <a href="#config">Properties Panel</a>.
    In lower "Archive Data Sources" list, 
    right-click and select "Remove Archive Data Source".
</ul>


<h2><a name=perspective>Data Browser Perspective</a></h2>
<p>
In addition to the Browser plot window itself, you typically use the
<a href="#config">Properties Panel</a> to change colors etc.,
or the <a href="#search">Search Panel</a> to locate the names
of PVs with historic data.
</p>
The Data Browser "Perspective" provides a suggested arrangement of these
additional panels around the plot window, similar to the screenshot in
Fig. 1 where the Properties and <a href="#export">Export</a> panels are
below the plot, and a Search panel is to its left.
</p>
<p>
To switch to the Data Browser Perspective in case it is not currently
selected, right-click on the Data Browser plot and select "Data Browser Perspective".
</p>
<p>
While in the perspective, you can then close the search panel, move the
properties panel around as desired.
If you later want to restore the default arrangement, 
again right-click on the Data Browser plot and select "Data Browser Perspective".
Since it's already active, it will ask if you want to <em>reset</em> the perspective
to its original state.
</p>


<h2><a name=toolbar>Plot Toolbar</a></h2>
<p>
The toolbar is displayed on top of a Data Browser plot.
If it is not visible, right-click on the plot to open the context menu,
then select "Show Toolbar".
</p>
<div class='figure'>
   <img src="toolbar.png" width="463" height="27"/>
   <p>
   Fig. 2: Data Browser Plot Toolbar
   </p>
</div>
<p>
Tool tips with brief explanations will appear if you hover the mouse pointer
over a toolbar button for a few seconds. Explanation of toolbar buttons:
<ul class="plain_icons">
<li><img src="Configure.png" width=16 height=16/> Configure Settings:
    Opens dialog for configuring the plot.<br>
    Note that these are runtime settings which include things like font settings
    that will not be saved as part of the Data Browser configuration.
<li><img src="Add_Annotation.png" width=16 height=16/> Add <a href="#annotate">Annotation</a>:
    After configuring the annotation to for example 'snap' to a selected trace,
    the next mouse click into the plot will add an annotation.
<li><img src="Del_Annotation.png" width=16 height=16/> Remove <a href="#annotate">Annotation</a>:
    Prompts for an annotation to remove from the plot.
</ul>
</p>
<p>
<ul class="plain_icons">
<li><img src="stagger.png" width=16 height=16/> Stagger Axes:
    Arranges the value axes such that the traces on different axes don't
    overlap.
<li><img src="HoverLabels.png" width=16 height=16/> Hover Labels:
    Display a value label for all the traces on previous real point.
    For optimized data, the Min and Max value are also displayed.
    If there are too much tooltips, the Min and Max values won't be displayed.
<li><img src="RubberbandZoom.png" width=16 height=16/> Rubberband Zoom:
    Click into plot, hold mouse pointer to drag a 'rubberband' rectangle,
    release to zoom into that area.<br>
    Can also be used on a value axis or the time axis to select a start/end
    range on the axis.
<li><img src="HorizontalZoom.png" width=16 height=16/> Horizontal Zoom:
    Click into plot at desired start time, hold mouse pointer to drag a
    'rubberband' rectangle to the desired end time,
    release to zoom into that area.<br>
    Can also be used on the time axis to select a start/end time.
<li><img src="VerticalZoom.png" width=16 height=16/> Vertical Zoom:
    Like Vertical Zoom for vertical (value) axes.<br>
    Can also be used on a value axis to select a start/end range for that axis.
<li><img src="ZoomInHoriz.png" width=16 height=16/> Zoom In Horizontally:
    Click and hold mouse pointer to zoom into time axis.
<li><img src="ZoomOutHoriz.png" width=16 height=16/> Zoom Out ...:
    Click and hold mouse pointer to zoom out of time axis.
<li><img src="ZoomInVert.png" width=16 height=16/> Zoom In Vertically:
    Click and hold mouse pointer to zoom into value axes.<br>
    Can also be used on a particular value axis zoom into that value axis.
<li><img src="ZoomOutVert.png" width=16 height=16/> Zoom Out ...:
    Click and hold mouse pointer to zoom out of value axes.
<li><img src="Panning.png" width=16 height=16/> Panning:
    Click into plot or axes, hold and drag to desired position, release mouse button.
<li><img src="MouseArrow.png" width=16 height=16/> None:
    For most of the other toolbar buttons, clicking or holding the (left) mouse
    button will for example activate a zoom operation.
    The "None" option returns the mouse pointer to an inactive state so that
    clicking into the plot has no effect.
</ul>
</p>
<p>
<ul class="plain_icons">
<li><img src="Undo.png" width=16 height=16/> Undo:
    Undo the last operation. Click again to undo the previous operation, the one
    before that and so on.
<li><img src="Redo.png" width=16 height=16/> Redo:
    Un-do the last undo, i.e. re-do.
</ul>
<ul class="plain_icons">
<li><img src="Camera.png" width=16 height=16/> Save Snapshot:
    Prompts for file name under which an image of the current plot is saved.
<li><img src="../icons/scroll_on.gif" width=16 height=16/> Enable/Disable Scrolling:
    Turns the strip-chart behavior of the Data Browser on or off:
    Scroll such that the right end of the time axis is always "now", or
    freeze the time axis.
</ul>
</p>


<h2><a name=config>Properties Panel</a></h2>
<p>
The Properties panel allows configuration of the plot, its axes and traces.
</p>
<p>
The same Properties panel is shared with other Data Browser plots or even
other CSS tools. When you have multiple Data Browser plots open, the Properties
panel will show the configuration of the plot that was last selected via a mouse
click. When no Data Browser plot is the active window, the Properties panel
will be empty or even show the configuration of a different CSS tool.
</p>
<p>
You can force the Properties panel to stay attached to a specific Data Browser
plot by selecting the "<img src="pin.gif" width=16 height=16/> pin" icon,
or open more than one Properties panel (which you can then 'pin' to specific
Data Browser plots) via the "<img src="view_menu.png" width=18 height=15/> drop-down"
menu of the panel.
</p>

<h3>Subsection 'Traces'</h3>

<div class='figure'>
   <img src="prop_traces.png"/>
   <p>
   Fig. 3: Properties panel, subseciton 'Traces'
   </p>
</div>

<p>
Configure the individual traces in the plot via the table of traces.
Right-click in the table to open a context menu for adding PVs or Formulas,
deleting selected items, or adding archive data sources to PVs.
<ul>
<li>Trace: Allows to <i>temporarily</i> hide a trace from the plot.
    If the trace is really not needed any more, consider deleting it.
<li>Item: Edit the item's name. For a PV, this would be the control system
    process variable. For a formula, this is the name under which the formula
    can appear as an input to other formulas.
<li>Display Name: The name shown in the plot legend.
<li>Color: Click to select the trace color
<li>Scan Period: Control system PVs can be scanned at some periodic rate,
    specified in second, to collect 'live' samples in addition to the data
    received from an archive.
    When entering 0 seconds, the Data Browser will show every update received
    from the PV, and the PV's configuration decides when to send such updates.
<li>Buffer Size: The Data Browser maintains a fixed-size ring buffer for
    'live' PV samples. When reaching the end of the ring buffer, older samples
    are deleted to prevent running out of memory.
    You can configure the ring buffer size for each trace.
<li>Width: The line widths of the trace in the plot. Also used for the size of markers. 
<li>Axis: Click to select the axis on which to plot the trace.
<li>Trace Type: Click to select how the trace should be displayed: Line, markers like "Square" etc.
    The size of the lines respectively markers is controlled by the "Width".
<li>Request: Click to select 'Optimized' vs. 'Raw Data'.
<li>Index: Index of an element in an array (waveform record). Change this index
    to see trend of a specified element in an array. The index is zero-based numbering.
    The index for the first element is 0, the index for the second element is 1, ...   
    If the index is out of range of the array, the corresponding value will be plotted as
    NaN which shows a marker on the bottom of the plot.
</ul>
</p>

<div class='figure'>
   <img src="optimized.png"/>
   <p>
   Fig. 4a: Traces with 'Optimized' Requests.
   </p>
</div>

<p>
With 'Optimized' requests, the Data Browser requests historic data as a reduced
(optimized) set of min/max/average samples.
When using 'Area' traces as shown in Fig. 4a, the average values are plotted
as a line, and the min/max outline is displayed as a light-colored area.
This not only reduces the amount of data compared to plotting every single
raw sample from the archive. In addition it makes it obvious if a value
was fairly stable over time, or if there was a lot of movement in the data
as around 06:00:00 in Fig. 4a.
</p>
<p>
The number of requested min/max/average samples is configurable in the
<a href="#preferences">Preferences</a>. When there are less 'raw' data points
than requested min/max/average samples, the 'Optimized' algorithm falls back
to returning the raw data, meaning:
When you zoom into the data far enough, you will eventually get raw data.
</p>

<div class='figure'>
   <img src="raw.png"/>
   <p>
   Fig. 4b: Blue traces switched to 'Raw' Request.
   </p>
</div>

<p>
When switching to 'Raw Data' requests as in Fig. 4b, each original sample is
requested from the history. Not only is this usually more data, taking longer
to receive and then plot to. It also uses more memory, and when you try to
look at raw data for a long time range your computer will eventually ran out
of memory.
The 'Raw Data' requests should therefore only be used when necessary because
of shortcomings in the 'Optimized' algorithm.
</p>


<h3>Subsection 'Time Axis'</h3>
<p>
Configure the start and end time of the time (horizontal) axis.
</p>

<h3>Subsection 'Value Axes'</h3>
<p>
Add/remove value ('Y', vertical) axes, change their label or color.
</p>

<h3>Subsection 'Misc.'</h3>
<p>
General plot settings: Background color, refresh rate.
</p>


<h2><a name=annotate>Annotations</a></h2>
<p>
The <a href="#toolbar">Toolbar</a> contains buttons to 
<img src="Add_Annotation.png" width=16 height=16/> add and
<img src="Del_Annotation.png" width=16 height=16/> remove Annotations.
</p>
<p>
When you <img src="Add_Annotation.png" width=16 height=16/> add an Annotation,
you select if and to which trace it should "snap".
You can enter an arbitrary annotation text ("Name") and show that with the
Annotation, and/or have it display the plotposition or Sample Information.
</p>
<p>
Move Annotation around the plot in the 
<img src="Panning.png" width=16 height=16/> Panning or 
<img src="MouseArrow.png" width=16 height=16/> inactive zoom modes.
</p>
<p>
Change the Name, color, "snap" behavior of existing Annotations
via the 
<img src="Configure.png" width=16 height=16/> Configure Settings button
in the toolbar.
</p>



<h2><a name=search>Archive Search Panel</a></h2>
<p>
The Archive Search Panel is part of the default
<a href="#perspective">Perspective</a>. If you cannot find it,
try to reset the perspective, or open a new one by right-clicking
into the plot and selecting "Open Archive Search Panel".
</p>
<p>
To locate Process Variable names (PVs) in an archive:
</p>
<ol>
<li>Optional: Select an archive URL other than the default.
<li>Optional: If the archive has more than one sub-archive, select one or more
    sub-archive to search.
<li>Enter PV name pattern, see details below.
<li>Press "Search".
</ol>
<p>
To show data for the resulting PVs, either right-click on PVs of interest
and select "CSS/Data Browser" to open a <i>new</i> Data Browser Plot for them,
or drag/drop the PVs from the search result table into an existing Data Browser
Plot. 
</p>

<h3>Simple Pattern</h3>
<p>
By default, PV name patterns can contain a question mark '?' as a place-holder
for any single character or an asterisk '*' in place of any sequence of characters.
</p>

<h3>Regular Expression Pattern</h3>
<p>
When enabling "Reg.Exp." pattern search via the corresponding check box,
a more powerful but also slower regular expression can be used:
</p>
<p>
<TABLE BORDER=0>
<TR BGCOLOR=#FFCC66><TH>Reg.Exp..</TH><TH>Meaning</TH></TR>
<TR><TD>.</TD><TD>Any Single Character</TD></TR>
<TR BGCOLOR=#DFDFFF><TD>.*</TD><TD>Zero or More Characters</TD></TR>
<TR><TD>a?</TD><TD>Single 'a' or no 'a'</TD></TR>
<TR BGCOLOR=#DFDFFF><TD>a*</TD><TD>Zero or more 'a'</TD></TR>
<TR><TD>a+</TD><TD>One or more 'a'</TD></TR>
<TR BGCOLOR=#DFDFFF><TD>.+</TD><TD>One or more arb. characters</TD></TR>
<TR><TD>a|b</TD><TD>Either single 'a' or 'b'</TD></TR>
<TR BGCOLOR=#DFDFFF><TD>[0-9]</TD><TD>'0' or '1' or ... or '9'</TD></TR>
<TR><TD>()</TD><TD>grouping of subexpressions</TD></TR>
<TR BGCOLOR=#DFDFFF><TD>Temp</TD><TD>Any Channel containing 'Temp'</TD></TR>
<TR><TD>Temp$</TD><TD>Any Channel <I>ending</I> in 'Temp'</TD></TR>
<TR BGCOLOR=#DFDFFF><TD>^RFQHR</TD><TD>Any Channel <I>starting</I> with 'RFQHR'</TD></TR>
<TR><TD>Tin_[0-9]+_sig$</TD><TD>Channels ending in 'Tin_&lt;NUMBER&gt;_sig'</TD></TR>
<TR BGCOLOR=#DFDFFF><TD>^XYZSys_Temp[2-3]$</TD><TD>'XYZSys_Temp2' or 'XYZSys_Temp3' </TD></TR>
<TR><TD>Pwr_(in)|(out)</TD><TD>Channels containing 'Pwr_in' or  'Pwr_out'</TD></TR>
</TABLE>
</p>


<h2><a name=export>Data Export</a></h2>
<p>
Use the "Export Samples" panel to write data into files suitable for spreadsheet
programs or Matlab.
</p>

<h3>Time Range</h3>
<p>
By default, the export will use the time range from the plot, but 
you can export data for a different time range.
</p>

<h3>Source Options</h3>
<p>
By default, the export will use the time range from the plot but fetch raw data from
the archive, not the optimized, reduced min/max/average data that is displayed in the plot. 
You can modify the time range of the export to differ from the range of the plot, and also
select to export either the exact data that is displayed in the plot, or request optimized
data with a different number of "bins" from the archive.
</p>

<ul>
<li>"Plot":
    The exact samples currently displayed in the plot
    will be exported.
</li>
<li>"Raw Archived Data":
    The exported data will contain data that is requested from
    the archive without modifications.
</li>
<li>"Optimized Archived Data":
    To reduce the number of exported samples, optimized data
    is requested from the archive.
    You specify the number of desired samples, and the
    export will then request roughly this number of averaged samples
    from the archive data source.
    <br/>
    For example, when requesting 800 optimized samples,
    the start..end time range is split into 800 "bins".
    The the minimum, maximum and average value
    of the raw samples within each bin is then exported.
</li>
<li>"Linear Interpolation":
    As an alternative way to reduce the number of exported samples,
    the exported samples are computed via linear interpolation
    from the raw data.
    You specify the interpolation interval in hours, minutes and seconds,
    for example 00:10:00 to obtain one sample every 10 minutes.
</li>
</ul>

<h3>Format Options</h3>
<p>
The format of the exported file defaults to a spreadsheet suitable for import into
most spreadsheet programs.
You can modify these settings:
</p>
<ul>
<li>"Tabular": Instead of a table that lists the samples for all channels, you can
               export the samples for each channel separately.
</li>
<li>".. with error columns": The min...max range of optimzed data is by
              default export as "error" columns, suitable for an error-bar display.
</li>
<li>".. with Severity/Status": The Severity and Status of each sample is by
              default exported, but you can omit it if not needed.
</li>
<li>"Default format": The number of decimal digits will be obtained from the data source.
</li>
<li>"Decimal format": You specify the number of decimal digits.
</li>
<li>"Exponential notation": Use exponential notation, where you again specify the number
              of decimal digits.
</li>
</ul>

<h3>Excel Spreadsheets</h3>
<p>
The exported data files are in a text format with TAB-delimited columns
suitable for import into spreadsheet programs like Microsoft Excel.
</p>
<p>
Assume you chose a filename of "test.dat" on your Desktop, follow these
steps for import into Excel:
<ol>
<li>In Excel, use File/Open to open the file "test.dat".<br>
    You might have to select "Files of type: All Files (*.*)"
    in the file "Open" dialog to do this.
<li>A "Text Import Wizard" should appear, and the default settings
    should already be set to
   <ul>
   <li>"Delimited - Characters such as ... tabs ..."
   <li>"Delimiters: Tab"
   </ul>
<li>Excel will default to a less useful format for the first column,
    the "Time" column, and only show time down to minutes, omitting the
    seconds or microseconds.<br>
    Fix this by clicking on the "A" table header,
    i.e. selecting the whole first column; right-click to get
    the "Format Cells..." dialog, and enter a "Custom" format:
    <pre>  m/d/yy h:mm:ss.000</pre>
</ol>
</p>
<p>
When performing computations on the data, values marked "#N/A"
which have non numerical value because they represent a status or error
should be ignored by Excel.
</p>
<p>
For plots, the "X/Y scatter" plot type using time as the X
axis and the value column for the Y axis tends to work best.
</p>
<p>
Note that Excel is limited to about 65000 lines. If your data
file includes more lines, those will be lost in the import.
You can work around this by exporting a smaller time range
into separate files, or by exporting averaged data.
</p>
<p>
The value columns for averaged data will contain text like
"5 [0 ... 10]" to indicate that the average value for that time
was 5, with a minimum/maximum range of 0 to 10.
To perform computations in excel, it might be useful to
select the column and perform a text replacement of
"[*]" with "" (nothing) to delete the min/max info.
</p>

<h3>OpenOffice.org/LibreOffice Calc (Spreadsheets)</h3>
<p>
As long as the exported data file has a ".csv" suffix,
OpenOffice.org/LibreOffice should open the file with an "import" dialog
similar to MS Excel, where you select "tab" delimited columns
as explained above.
</p>
<p>
File names ending in ".dat", ".txt" etc. might only
open in the OpenOffice.org/LibreOffice Writer (word processor), so you have
to use the correct file suffix.
</p>

<h3>Matlab</h3>
<p>
The Matlab export can use two different file formats:
</p>

<ul>
<li>To create binary Matlab data files, use a file name ending in ".mat".</li>
<li>Matlab text files are created when the file name ends in ".m".</li>
</ul>

<h4>Binary Matlab .mat Files</h4>

<p>
The binary data file like "example.mat" is suitable for loading into Matlab 5 and newer like this:
</p>
<pre>
load /path/to/the/example.mat
</pre>

<p>
In your Matlab workspace you should then find structures named "channel0", "channel1", ..., one
for each channel that was loaded from the file. Each structure has the following elements:
</p>
<ul>
<li><b>name</b>: Channel name</li>
<li><b>time</b>: Time stamps</li>
<li><b>value</b>: Numeric value</li>
<li><b>severity</b>: Severity</li>
</ul>

<p>
The time stamps are saved as text. In reasonable modern versions of Matlab you best convert them
to Matlab serial date numbers, which you can then for example plot over time like this:
</p>
<pre>
channel0.date = datenum(channel0.time, 'yyyy/mm/dd HH:MM:SS.FFF');
plot(channel0.date, channel0.value);
datetick('x',0);
title(channel0.name);
</pre>

<h4>Matlab .m Text Files</h4>

<p>The text file like "example.m" is suitable for loading (executing) in Matlab R2006b
or newer, creating one 'timeseries' object per trace.
To load it into Matlab, you execute the file like this:
</p>
<pre>cd /path/to/the/file
example
</pre>
<p>Matlab will then execute the commands in the file which define the data in the Matlab
workspace and also plot it.
With Matlab releases older than R2006b you will have to edit the generated file 
to suit your needs, for example use simply "plot(v);" to show the values.
</p>


<h2><a name=import>Data Import</a></h2>
<p>
There is basic support for importing data from data files.
The data file is fundamentally treated like as archive data source.
The data file must reside in the workspace, i.e. it must be visible in the
file Navigator.
</p>
<p>
A channel based on a data file can be added in two ways:
</p>
<ul>
<li>'Drag' the file into a plot, or</li>
<li>Select 'Import' from the plot context menu.</li>
</ul>
<p>
The data file must only contain data for a single channel.
The lines of this data file must match the following format:
<pre>
# YYYY-MM-DD HH:MM:SS.SSS   value
2011-08-09 15:51:16.734     299.634000

# or
# YYYY/MM/DD HH:MM:SS.SSSSSSSSS   value
2012/12/06 07:38:05.764764346     26.6504 OK      OK
</pre>
<p>
The time stamp and value may be separated by spaces or tab characters.
Lines that do not match this format are ignored.
</p>
<p>
One example of a suitable data file is the format that results from 'exporting'
data for a single channel. 
</p>
<p>
When saving a *.plt file that includes channels with imported data,
the name of the data file is stored, not the actual sample data.
The next time such a plot is loaded, data will again be imported from the file.
</p>


<h2><a name=inspect>Inspect Samples</a></h2>
<p>
The "Inspect Samples" panel, accessible from the context menu of the plot,
provides a tabular view of all samples in the Data Browser memory.
It is mostly used for debugging.
</p>
<p>
For performance reasons, the table does <u>not</u> update with each received
sample. Instead, a manual update via the "Refresh" button is required to
show newly received "live" samples or to force an update of a table that
appears inconsitent.
</p>


<h2><a name=waveforms>Waveforms (Arrays)</a></h2>
<p>
Support for waveform (array) type channels is limited.
The Data Browser will only display one array element of a waveform channel over time.
By default this is the first array element of each waveform sample, array element zero.
The array index can be changed via the "Index" 
property of the channel in the <a href="#config">Properties Panel</a>.
</p>
<p>
The context menu of the plot has an entry to open the "Inspect Waveform" view.
It can display each waveform sample individually.
</p>
<p>
The fundamental problem with waveform channels is that the channel data itself
does not provide sufficient information:
Is the array sample
</p>
<ul>
<li>a readout of a fast device, where the time stamp identifies the time of the first
    (or last) array element, and the other array elements were obtained at small, fixed
    time intervals after (before) the sample's time stamp?
    This type of waveform could be displayed in the main Data Browser plot over time,
    but the time detail is not known from the channel data.
</li>
<li>a readout of for example a beam position monitor or histogram or
    multi channel analyzer, where each array element represents the value
    at a certain position, energy, ...?
    To display this, one needs to know the "X Axis" information.
</li>
<li>other structured data that was encoded in a waveform,
    because the underlying control system (EPICS Version 3)
    does not support data types for images or structures?
    To display this, the data encoding needs to be known. 
</li>
</ul>


<h2><a name=preferences>Preference Settings</a></h2>
<p>
Use the menu Edit/Preferences/CSS Applications/Trends/Data Browser
to change various settings including the default time range
of a new plot, the number of 'Plot Bins' used by the
Optimized request type. 
</p>


<a name=transition><h2>Transition from older Data Browser</a></h2>
<div align='center'><img src="OldSnapshot.png" width="90%"/></div>
<p>
Even though this Data Browser code is quite different from the original code,
you will notice a very similar look and overall behavior.
The data browser also loads old "*.css-plt" configuration files.
</p>
<p>
When you first open the new Data Browser, you should reset the perspective.
</p>
<p>
The main differences:
<ul>
<li>The <a href="#toolbar">plot's Toolbar</a> has different options
<li>The "Data Browser Config" panel has been replaced by the standard
    Eclipse <a href="#config">"Properties" Panel</a>
</ul>
</p>


<h2><a name=history>Product History</a></h2>
<p>
At LANL, Craig McChesney and Sergei Chevtsov with contributions by Peregrine
McGehee implemented the Java Archive Viewer for displaying Channel Archiver
data (2004).
</p>
<p>
The first CSS Data Browser was based on Archive Viewer ideas but added
live data handling as well as CSS integration and pluggable support for more than
one type of historic data source (2007)
</p>
<p>
After many changes to the code, a rework was required (2010):
<ul>
<li>Code cleanup using UML diagrams, 'Model' with standalone Unit tests...
<li>New XY Chart:
    <ul>
    <li>Pan axes or whole plot via mouse
    <li>More zoom in/out options
    <li>Annotations can 'snap' to trace or be freely positioned 
    </ul>
<li>Undo/redo support for almost everything
<li>PVs can scan at individual rates, or log every received change.
<li>Formula handles min/max samples
<li>Export supports spreadsheet as well as MatLab file format
<li>Use of "Properties" View allows shared as well as multiple configuration panels
<li>New archive reader API that is 'smaller', with  better support for cancellation,
    and support for faster Oracle data readout via 'stored procedure'.
</ul>
</p>

<address>
Kay Kasemir, kasemirk@ornl.gov
</address>

</body>
</html>